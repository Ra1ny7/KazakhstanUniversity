{% extends "base.html" %}
{% block title %}–ü–æ–º–æ—â–Ω–∏–∫{% endblock %}
{% block page_title %}–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫{% endblock %}
{% block page_sub %}–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—é{%
endblock %}

{% block content %}
<style>
    .assistant-container {
        max-width: 900px;
        margin: 0 auto;
    }

    .intro-card {
        background: linear-gradient(135deg, #ffffff, #e8f5e9);
        padding: 32px;
        border-radius: 16px;
        margin-bottom: 32px;
        text-align: center;
        box-shadow: 0 4px 16px var(--card-shadow);
    }

    .intro-card h2 {
        color: var(--green1);
        margin-bottom: 16px;
    }

    .info-badge {
        display: inline-block;
        padding: 8px 16px;
        background-color: var(--green3);
        color: var(--green-dark);
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
        margin: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .university-list {
        display: grid;
        gap: 16px;
    }

    .university-item {
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid var(--green1);
        box-shadow: 0 2px 8px var(--card-shadow);
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
    }

    .university-item:hover {
        transform: translateX(8px);
        box-shadow: 0 4px 16px var(--card-shadow-hover);
    }

    .university-name {
        font-weight: 600;
        color: var(--green-dark);
        font-size: 1.1rem;
    }

    .university-city {
        color: var(--muted);
        font-size: 0.9rem;
        margin-top: 4px;
    }

    /* ------------------------- –ù–û–í–´–ô –°–¢–ò–õ–¨ –ö–ù–û–ü–û–ö ------------------------- */

    .btn {
        background: var(--green1);
        color: white;
        border: none;
        padding: 12px 18px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 0.95rem;
        transition: 0.2s;
        width: 170px;
        /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è —Ä–æ–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ */
        text-align: center;
        /* —Ä–æ–≤–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ */
        font-weight: 600;
    }

    .btn:hover {
        background: var(--green-dark);
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    /* ------------------------- –ú–û–î–ê–õ–ö–ê ------------------------- */

    .advice-modal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.6);
    }

    .advice-content {
        background: #fff;
        margin: 5% auto;
        padding: 32px;
        border-radius: 16px;
        width: 90%;
        max-width: 700px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        max-height: 80vh;
        overflow-y: auto;
    }

    .close {
        color: var(--muted);
        transition: color 0.2s ease;
    }

    .close:hover {
        color: var(--text-dark);
    }

    /* ------------------------- –ê–ö–ö–û–†–î–ï–û–ù ------------------------- */

    .advice-section {
        margin: 16px 0;
        padding: 0;
        background: #fff;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        transition: box-shadow 0.3s ease;
    }

    .advice-section:last-child {
        border: none !important;
        margin-top: 24px;
    }

    .advice-section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: #f5f5f5;
        color: var(--green-dark);
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s ease;
        border-left: 4px solid var(--green1);
    }

    .advice-section-header:hover {
        background: #eeeeee;
    }

    .advice-section-header span.toggle-icon {
        font-size: 1.2rem;
        transition: transform 0.3s ease;
    }

    .advice-section-content {
        max-height: 0;
        padding: 0 20px;
        overflow: hidden;
        transition: max-height 0.4s ease-out, padding 0.4s ease-out;
    }

    .advice-section.active .advice-section-content {
        max-height: 500px;
        padding: 15px 20px;
        border-top: 1px solid var(--border-color);
    }

    .advice-section.active .toggle-icon {
        transform: rotate(90deg);
    }

    .advice-section-content ul {
        margin: 0;
        padding-left: 20px;
        list-style: disc;
    }

    .advice-section-content li {
        margin: 8px 0;
        color: var(--text-secondary);
    }
</style>

<div class="assistant-container">
    <div class="intro-card">
        <h2>ü§ñ –í–∞—à –ª–∏—á–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</h2>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</p>

        <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
            <span class="info-badge">üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—é</span>
            <span class="info-badge">üí∞ –§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
            <span class="info-badge">üìö –í—ã–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã</span>
            <span class="info-badge">üéØ –ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã</span>
        </div>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 20px; color: var(--green1);">üìã –°–ø–∏—Å–æ–∫ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤</h3>

        <div class="university-list">
            {% for u in universities %}
            <div class="university-item">
                <div>
                    <div class="university-name">{{ u.name }}</div>
                    <div class="university-city">üìç {{ u.city }}</div>
                </div>

                <button class="btn" onclick="showAdvice('{{ u.name }}', '{{ u.city }}', {{ u.founded }})">
                    üí° –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç—ã
                </button>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ -->
<div id="adviceModal" class="advice-modal">
    <div class="advice-content">
        <span class="close" onclick="closeAdvice()"
            style="float: right; font-size: 28px; cursor: pointer;">&times;</span>
        <h2 id="advice-title" style="color: var(--green1); margin-bottom: 24px;"></h2>
        <div id="advice-body"></div>
    </div>
</div>

<script>
    function toggleAdvice(el) {
        el.closest('.advice-section').classList.toggle('active');
    }

    function showAdvice(name, city, founded) {
        document.getElementById('advice-title').textContent = "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: " + name;

        const html = `
        <div class="advice-section active">
            <div class="advice-section-header" onclick="toggleAdvice(this)">
                <h4>üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—é</h4>
                <span class="toggle-icon">‚ñ∂</span>
            </div>
            <div class="advice-section-content">
                <ul>
                    <li>–ù–∞—á–Ω–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∑–∞ 6‚Äì12 –º–µ—Å—è—Ü–µ–≤.</li>
                    <li>–ò–∑—É—á–∏—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ï–ù–¢/–ö–¢ –∏ IELTS/TOEFL.</li>
                    <li>–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ.</li>
                    <li>–°–æ–±–µ—Ä–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç —É—á–∏—Ç–µ–ª–µ–π.</li>
                </ul>
            </div>
        </div>

        <div class="advice-section">
            <div class="advice-section-header" onclick="toggleAdvice(this)">
                <h4>üí∞ –§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
                <span class="toggle-icon">‚ñ∂</span>
            </div>
            <div class="advice-section-content">
                <ul>
                    <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä–∞–Ω—Ç—ã –∏ —Å—Ç–∏–ø–µ–Ω–¥–∏–∏.</li>
                    <li>–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã.</li>
                    <li>–£–∑–Ω–∞–π—Ç–µ –ø—Ä–æ –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –≤ –≥–æ—Ä–æ–¥–µ ${city}.</li>
                    <li>–°–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ.</li>
                </ul>
            </div>
        </div>

        <div class="advice-section">
            <div class="advice-section-header" onclick="toggleAdvice(this)">
                <h4>üìö –í—ã–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã</h4>
                <span class="toggle-icon">‚ñ∂</span>
            </div>
            <div class="advice-section-content">
                <ul>
                    <li>–ò–∑—É—á–∏—Ç–µ —É—á–µ–±–Ω—ã–µ –ø–ª–∞–Ω—ã.</li>
                    <li>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.</li>
                    <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.</li>
                    <li>–ü–æ—Å–µ—Ç–∏—Ç–µ –î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π.</li>
                </ul>
            </div>
        </div>

        <div class="advice-section">
            <div class="advice-section-header" onclick="toggleAdvice(this)">
                <h4>üéØ –ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã</h4>
                <span class="toggle-icon">‚ñ∂</span>
            </div>
            <div class="advice-section-content">
                <ul>
                    <li>–ò–∑—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.</li>
                    <li>–£–∑–Ω–∞–π—Ç–µ –æ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∞—Ö.</li>
                    <li>–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—É—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã.</li>
                    <li>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏–∏-–ø–∞—Ä—Ç–Ω—ë—Ä—ã.</li>
                </ul>
            </div>
        </div>
        `;

        document.getElementById("advice-body").innerHTML = html;
        document.getElementById("adviceModal").style.display = "block";
    }

    function closeAdvice() {
        document.getElementById("adviceModal").style.display = "none";
    }

    window.onclick = function (event) {
        if (event.target === document.getElementById("adviceModal")) {
            closeAdvice();
        }
    }
</script>
{% endblock %}